<!DOCTYPE html>
<html lang="pl-PL">
<head>
          <link href="styl4.css" rel="stylesheet">
          <meta charset="UTF-8">
          <meta http-equiv="X-UA-Compatible" content="IE=edge">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>Zamówienia hurtowe</title>
</head>
<body onload="shortcomings()">
          <div id="banner">
                    <center>
                    <h1>Sieci komputerowe</h1>
                    </center>
          </div>

          <div id="leftBlock">
                    <center>
                    <h2>Aktualizacja i zamówienia materiałow</h2>
                    <p>Do wewnętrznego użytku firmy</p>
                    <img src="obraz.png" alt="sieć komputerowa">
                    </center>
          </div>

          <div id="rightBlock">
                    <table id="table">
                              <tr>
                                        <th scope="col">Produkt</th>
                                        <th scope="col">Jednostka</th>
                                        <th scope="col">Dostępna ilość</th>
                                        <th scope="col">Aktualizacja</th>
                                        <th scope="col">Zamówienie</th>
                              </tr>
                            
                              <tr>
                                        <td>Skrętka U/UTP drut</td>
                                        <td>metr</td>
                                        <td>20</td>
                                        <td><button class = "c1" onclick="update(this)">Aktualizuj</button></td>
                                        <td><button class = "c2" onclick="buy(this)">Zamów</button></td>
                              </tr>
                            
                              <tr>
                                        <td>Skrętka U/UTP linka</td>
                                        <td>metr</td>
                                        <td>2</td>
                                        <td><button class = "c1" onclick="update(this)">Aktualizuj</button></td>
                                        <td><button class = "c2" onclick="buy(this)">Zamów</button></td>
                              </tr>

                              <tr>
                                        <td>Wtyki 8P8C</th>
                                        <td>sztuki</td>
                                        <td>10</td>
                                        <td><button class = "c1" onclick="update(this)">Aktualizuj</button></td>
                                        <td><button class = "c2" onclick="buy(this)">Zamów</button></td>
                              </tr>

                              <tr>
                                        <td>Moduły Keystone</td>
                                        <td>sztuki</td>
                                        <td>30</td>
                                        <td><button class = "c1" onclick="update(this)">Aktualizuj</button></td>
                                        <td><button class = "c2" onclick="buy(this)">Zamów</button></td>
                              </tr>
                    </table>
          </div>

          <div id="footer">
                    <center>
                    <a href="http://sieci.pl/">Nasza strona internetowa</a> <br>
                    <p>Stronę przygotował: Gabriel Achler</p>
                    </center>
          </div>

          <script>
                    
                    function shortcomings(){
                        const table = document.getElementById("table")
                        numbers = document.getElementById("table").rows[0].cells.length

                        for(i=1; i <= numbers ; i++ ){
                            value = table.rows[i].cells[2].innerText

                            if(value == 0){
                                table.rows[i].cells[2].style.background = "red"
                            }
                            else if(value > 1 && value < 5 ){
                                table.rows[i].cells[2].style.background = "yellow"
                            }
                            else
                            table.rows[i].cells[2].style.background = "honeydew"
                        }

                    }

                    function update(id) {
                        quantity = prompt("Podaj nową ilość: ")
                        let num1 = document.getElementsByClassName("c1")
                        let fn = 0

                        for(i = 0; i < num1.length; i++) {
                            if (id == num1[i]) {
                                fn = i;
                            }
                        }
                        document.getElementById("table").rows[fn + 1].cells[2].innerHTML = quantity;
                        shortcomings();
                    }

                    function buy(id) {
                        let num2 = document.getElementsByClassName("c2")
                        let fn2 = 0

                        for(i = 0; i < num2.length; i++) {
                            if (id == num2[i]) {
                                fn2 = i;
                            }
                        }
                        orderNumber = fn2 + 1
                        amount =  document.getElementById("table").rows[orderNumber].cells[2].innerText;
                        document.getElementById("table").rows[orderNumber].cells[2].innerHTML = parseInt(amount) + 1;
                        
                        shortcomings();
                        
                        type = document.getElementById("table").rows[orderNumber].cells[0].innerText;
                        alert("Zamówienie nr: " + orderNumber + "Produkt: " + type);

                    }
                    
                    
                    //wykorzystaj promt window, w celu zamiany wprowadzanych danych
                    //w tabeli oraz oczywiście alertów
          </script>
          
</body>
</html>